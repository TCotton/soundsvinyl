{"version":3,"sources":["webpack:///./app/helper_constants.js","webpack:///./app/front/Account/MyAccount.js","webpack:///./app/front/Account/account.scss?f18f","webpack:///./app/front/Account/MyAccountForm.js"],"names":["homeURI","window","location","protocol","hostname","port","length","_react","__webpack_require__","_helper_constants","_helper_functions","MyAccount","props","_classCallCheck","this","_this","_possibleConstructorReturn","__proto__","Object","getPrototypeOf","call","state","loginFormloginName","loginFormloginPassword","registerFormloginName","registerFormloginPassword","error","handleSubmitLogin","bind","handleSubmitRegister","handleInputChange","Component","e","_this2","preventDefault","_state","email","password","setState","username","createUsername","axios","post","then","res","data","auth","Cookies","set","token","expires","_moment2","default","add","toDate","path","domain","secure","href","document","referrer","catch","toString","includes","_this3","_state2","event","target","value","name","_defineProperty","_state3","errorFunc","_react2","createElement","className","_ErrorBoundary2","_MyAccountForm2","formName","legend","nameLabel","onFormSubmit","onInputChange","passwordLabel","disabled","module","exports","line-through","myAccount","MyAccountForm","_props","autoComplete","onSubmit","htmlFor","data-autocapitalize","id","onChange","required","type","propTypes","PropTypes","bool","string","isRequired","func","defaultProps"],"mappings":"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","file":"9.f5c7355ebaf08f75132b.chunk.js","sourcesContent":["export const homeURI = window.location.protocol + '//' + window.location.hostname + (window.location.port.length === 0 ? '' : ':8443');\n","import React, { Component } from 'react';\nimport axios from 'axios';\nimport Cookies from 'universal-cookie';\nimport moment from 'moment';\nimport { homeURI } from '../../helper_constants';\nimport { createUsername } from '../../helper_functions';\nimport './account.scss';\nimport MyAccountForm from './MyAccountForm';\nimport ErrorBoundary from '../errorBoundaries/ErrorBoundary';\n\nclass MyAccount extends Component {\n\n\tconstructor (props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tloginFormloginName: '',\n\t\t\tloginFormloginPassword: '',\n\t\t\tregisterFormloginName: '',\n\t\t\tregisterFormloginPassword: '',\n\t\t\terror: null\n\t\t};\n\n\t\tthis.handleSubmitLogin = this.handleSubmitLogin.bind(this);\n\t\tthis.handleSubmitRegister = this.handleSubmitRegister.bind(this);\n\t\tthis.handleInputChange = this.handleInputChange.bind(this);\n\t}\n\n\thandleSubmitRegister (e) {\n\t\te.preventDefault();\n\n\t\tconst {\n\t\t\tregisterFormloginName,\n\t\t\tregisterFormloginPassword\n\t\t} = this.state;\n\n\t\tif (registerFormloginName && registerFormloginPassword) {\n\n\t\t\tconst email = registerFormloginName;\n\t\t\tconst password = registerFormloginPassword;\n\n\t\t\tthis.setState({error: null}); // place this in a lifecycle hook\n\t\t\tconst username = createUsername(email);\n\n\t\t\taxios.post(`${homeURI}/apiV1/user/add`, {email, password, username})\n\t\t\t\t.then(res => {\n\n\t\t\t\t\tif (res.data.error) {\n\t\t\t\t\t\tthis.setState({error: res.data.error});\n\t\t\t\t\t}\n\n\t\t\t\t\tif (res.data.auth) {\n\n\t\t\t\t\t\tconst cookies = new Cookies();\n\n\t\t\t\t\t\tcookies.set('token', res.data.token, {\n\t\t\t\t\t\t\texpires: moment().add(1, 'days').toDate(),\n\t\t\t\t\t\t\tpath: '/',\n\t\t\t\t\t\t\tdomain: window.location.hostname,\n\t\t\t\t\t\t\tsecure: true,\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// go back to previous page\n\t\t\t\t\t\twindow.location.href = document.referrer;\n\t\t\t\t\t}\n\n\t\t\t\t}).catch((e) => {\n\n\t\t\t\tif (e.toString().includes('409')) {\n\t\t\t\t\tthis.setState({error: 'This email address is already registered'});\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n\thandleSubmitLogin () {\n\t\tconst { loginFormloginName, loginFormloginPassword } = this.state;\n\n\t\tif (loginFormloginName && loginFormloginPassword) {\n\n\t\t\tthis.setState({error: null}); // place this in a lifecycle hook\n\t\t\t// `user/add`\n\n\t\t\taxios.post(`${homeURI}/apiV1/user/find`, {email: loginFormloginName, password: loginFormloginPassword})\n\t\t\t\t.then(res => {\n\n\t\t\t\t\tif (res.data.error) {\n\t\t\t\t\t\tthis.setState({error: res.data.error});\n\t\t\t\t\t}\n\n\t\t\t\t\tif (res.data.auth) {\n\n\t\t\t\t\t\tconst cookies = new Cookies();\n\n\t\t\t\t\t\tcookies.set('token', res.data.token, {\n\t\t\t\t\t\t\texpires: moment().add(1, 'days').toDate(),\n\t\t\t\t\t\t\tpath: '/',\n\t\t\t\t\t\t\tdomain: window.location.hostname,\n\t\t\t\t\t\t\tsecure: true,\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// go back to previous page\n\t\t\t\t\t\twindow.location.href = document.referrer;\n\t\t\t\t\t}\n\n\t\t\t\t});\n\t\t}\n\t}\n\n\thandleInputChange (event) {\n\n\t\tconst target = event.target;\n\t\tconst value = target.value;\n\t\tconst name = target.name;\n\n\t\tthis.setState({\n\t\t\t[name]: value\n\t\t});\n\n\t}\n\n\trender () {\n\n\t\tconst { loginFormloginName, error, loginFormloginPassword, registerFormloginName, registerFormloginPassword } = this.state;\n\n\t\tconst errorFunc = error ? () => {\n\t\t\treturn (\n\t\t\t\t<p styleName='error'>\n\t\t\t\t\t{error}\n\t\t\t\t</p>\n\t\t\t)\n\t\t} : () => { return null };\n\n\t\treturn (\n\t\t\t<main styleName='myAccount'>\n\t\t\t\t<h2>\n\t\t\t\t\t{'My Account'}\n\t\t\t\t</h2>\n\t\t\t\t<p>\n\t\t\t\t\t{'Either login or register an account with SoundsVinyl from this page'}\n\t\t\t\t</p>\n\n\t\t\t\t{errorFunc()}\n\n\t\t\t\t<section>\n\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t<MyAccountForm\n\t\t\t\t\t\t\tformName='loginForm'\n\t\t\t\t\t\t\tlegend='Login'\n\t\t\t\t\t\t\tname={loginFormloginName}\n\t\t\t\t\t\t\tnameLabel='Your email'\n\t\t\t\t\t\t\tonFormSubmit={this.handleSubmitLogin}\n\t\t\t\t\t\t\tonInputChange={this.handleInputChange}\n\t\t\t\t\t\t\tpassword={loginFormloginPassword}\n\t\t\t\t\t\t\tpasswordLabel='Your password'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ErrorBoundary>\n\n\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t<MyAccountForm\n\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\tformName='registerForm'\n\t\t\t\t\t\t\tlegend='Register'\n\t\t\t\t\t\t\tname={registerFormloginName}\n\t\t\t\t\t\t\tnameLabel='Your email'\n\t\t\t\t\t\t\tonFormSubmit={this.handleSubmitRegister}\n\t\t\t\t\t\t\tonInputChange={this.handleInputChange}\n\t\t\t\t\t\t\tpassword={registerFormloginPassword}\n\t\t\t\t\t\t\tpasswordLabel='Your password'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t</section>\n\t\t\t</main>\n\t\t)\n\t}\n}\n\nexport default MyAccount;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"line-through\":\"account__line-through___3n019\",\"myAccount\":\"account__myAccount___35jgU\",\"error\":\"account__error___3LR2J\"};","import { Component } from 'react'\nimport React from 'react'\nimport PropTypes from 'prop-types';\n\nexport default class MyAccountForm extends Component {\n\n\tstatic propTypes = {\n\t\tdisabled: PropTypes.bool,\n\t\tformName: PropTypes.string.isRequired,\n\t\tlegend: PropTypes.string.isRequired,\n\t\tname: PropTypes.string.isRequired,\n\t\tnameLabel: PropTypes.string.isRequired,\n\t\tonFormSubmit: PropTypes.func.isRequired,\n\t\tonInputChange: PropTypes.func.isRequired,\n\t\tpassword: PropTypes.string.isRequired,\n\t\tpasswordLabel: PropTypes.string.isRequired\n\t};\n\n\tstatic defaultProps = {\n\t\tdisabled: false\n\t}\n\n\tconstructor (props) {\n\t\tsuper(props);\n\n\t\tthis.handleSubmitLogin = this.handleSubmitLogin.bind( this );\n\t\tthis.handleInputChange = this.handleInputChange.bind( this );\n\t}\n\n\thandleSubmitLogin(event) {\n\t\tevent.preventDefault();\n\n\t\tconst { onFormSubmit } = this.props;\n\t\tonFormSubmit();\n\t}\n\n\thandleInputChange(event) {\n\t\tevent.preventDefault();\n\n\t\tconst { onInputChange } = this.props;\n\t\tonInputChange(event);\n\t}\n\n\trender () {\n\t\tconst { name, password, legend, nameLabel, passwordLabel, formName, disabled } = this.props;\n\n\t\treturn (\n\n\t\t\t<form\n\t\t\t\tautoComplete='off'\n\t\t\t\tname={formName}\n\t\t\t\tonSubmit={this.handleSubmitLogin}\n\t\t\t>\n\t\t\t\t<fieldset>\n\t\t\t\t\t<legend>\n\t\t\t\t\t\t{legend}\n\t\t\t\t\t</legend>\n\n\t\t\t\t\t<label htmlFor={`${formName}loginName`}>\n\t\t\t\t\t\t{nameLabel}\n\t\t\t\t\t</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tdata-autocapitalize='none'\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\tid={`${formName}loginName`}\n\t\t\t\t\t\tname={`${formName}loginName`}\n\t\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t\t\trequired\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<label htmlFor={`${formName}loginPassword`}>\n\t\t\t\t\t\t{passwordLabel}\n\t\t\t\t\t</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\tid={`${formName}loginPassword`}\n\t\t\t\t\t\tname={`${formName}loginPassword`}\n\t\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t\t\trequired\n\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\tvalue={password}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<input\n\t\t\t\t\t\tname='loginSubmit'\n\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\tvalue='Login'\n\t\t\t\t\t/>\n\n\t\t\t\t</fieldset>\n\t\t\t</form>\n\n\t\t)\n\t}\n}\n"],"sourceRoot":""}