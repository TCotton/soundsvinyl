{"version":3,"sources":["webpack:///./app/helper_constants.js","webpack:///./app/front/Account/MyAccount.js","webpack:///./app/front/Account/account.scss?12b3","webpack:///./app/front/Account/MyAccountForm.js"],"names":["homeURI","window","location","protocol","hostname","port","length","MyAccount","props","state","loginFormloginName","loginFormloginPassword","registerFormloginName","registerFormloginPassword","error","handleSubmitLogin","bind","handleSubmitRegister","handleInputChange","e","preventDefault","this","email","password","setState","username","createUsername","axios","post","then","res","data","auth","Cookies","set","token","expires","add","toDate","path","domain","secure","href","document","referrer","catch","toString","includes","event","target","value","name","errorFunc","formName","legend","nameLabel","onFormSubmit","onInputChange","passwordLabel","disabled","Component","module","exports","MyAccountForm","autoComplete","onSubmit","htmlFor","data-autocapitalize","id","onChange","required","type","propTypes","PropTypes","bool","string","isRequired","func","defaultProps"],"mappings":"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","file":"9.94e15bdfd594132a4ac6.chunk.js","sourcesContent":["export const homeURI =\n\twindow.location.protocol +\n\t'//' +\n\twindow.location.hostname +\n\t(window.location.port.length === 0 ? '' : ':8443')\n","import React, { Component } from 'react'\nimport axios from 'axios'\nimport Cookies from 'universal-cookie'\nimport moment from 'moment-mini'\nimport { homeURI } from '../../helper_constants'\nimport { createUsername } from '../../helper_functions'\nimport './account.scss'\nimport MyAccountForm from './MyAccountForm'\nimport ErrorBoundary from '../errorBoundaries/ErrorBoundary'\n\nclass MyAccount extends Component {\n\tconstructor (props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tloginFormloginName: '',\n\t\t\tloginFormloginPassword: '',\n\t\t\tregisterFormloginName: '',\n\t\t\tregisterFormloginPassword: '',\n\t\t\terror: null\n\t\t}\n\n\t\tthis.handleSubmitLogin = this.handleSubmitLogin.bind(this)\n\t\tthis.handleSubmitRegister = this.handleSubmitRegister.bind(this)\n\t\tthis.handleInputChange = this.handleInputChange.bind(this)\n\t}\n\n\thandleSubmitRegister (e) {\n\t\te.preventDefault();\n\n\t\tconst { registerFormloginName, registerFormloginPassword } = this.state\n\n\t\tif (registerFormloginName && registerFormloginPassword) {\n\t\t\tconst email = registerFormloginName\n\t\t\tconst password = registerFormloginPassword\n\n\t\t\tthis.setState({ error: null }) // place this in a lifecycle hook\n\t\t\tconst username = createUsername(email)\n\n\t\t\taxios\n\t\t\t\t.post(`${homeURI}/apiV1/user/add`, { email, password, username })\n\t\t\t\t.then(res => {\n\t\t\t\t\tif (res.data.error) {\n\t\t\t\t\t\tthis.setState({ error: res.data.error })\n\t\t\t\t\t}\n\n\t\t\t\t\tif (res.data.auth) {\n\t\t\t\t\t\tconst cookies = new Cookies()\n\n\t\t\t\t\t\tcookies.set('token', res.data.token, {\n\t\t\t\t\t\t\texpires: moment()\n\t\t\t\t\t\t\t\t.add(1, 'days')\n\t\t\t\t\t\t\t\t.toDate(),\n\t\t\t\t\t\t\tpath: '/',\n\t\t\t\t\t\t\tdomain: window.location.hostname,\n\t\t\t\t\t\t\tsecure: true\n\t\t\t\t\t\t})\n\n\t\t\t\t\t\t// go back to previous page\n\t\t\t\t\t\twindow.location.href = document.referrer\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(e => {\n\t\t\t\t\tif (e.toString().includes('409')) {\n\t\t\t\t\t\tthis.setState({ error: 'This email address is already registered' })\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t}\n\t}\n\n\thandleSubmitLogin () {\n\t\tconst { loginFormloginName, loginFormloginPassword } = this.state\n\n\t\tif (loginFormloginName && loginFormloginPassword) {\n\t\t\tthis.setState({ error: null }) // place this in a lifecycle hook\n\t\t\t// `user/add`\n\n\t\t\taxios\n\t\t\t\t.post(`${homeURI}/apiV1/user/find`, {\n\t\t\t\t\temail: loginFormloginName,\n\t\t\t\t\tpassword: loginFormloginPassword\n\t\t\t\t})\n\t\t\t\t.then(res => {\n\t\t\t\t\tif (res.data.error) {\n\t\t\t\t\t\tthis.setState({ error: res.data.error })\n\t\t\t\t\t}\n\n\t\t\t\t\tif (res.data.auth) {\n\t\t\t\t\t\tconst cookies = new Cookies()\n\n\t\t\t\t\t\tcookies.set('token', res.data.token, {\n\t\t\t\t\t\t\texpires: moment()\n\t\t\t\t\t\t\t\t.add(1, 'days')\n\t\t\t\t\t\t\t\t.toDate(),\n\t\t\t\t\t\t\tpath: '/',\n\t\t\t\t\t\t\tdomain: window.location.hostname,\n\t\t\t\t\t\t\tsecure: true\n\t\t\t\t\t\t})\n\n\t\t\t\t\t\t// go back to previous page\n\t\t\t\t\t\twindow.location.href = document.referrer\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t}\n\t}\n\n\thandleInputChange (event) {\n\t\tconst target = event.target\n\t\tconst value = target.value\n\t\tconst name = target.name\n\n\t\tthis.setState({\n\t\t\t[name]: value\n\t\t})\n\t}\n\n\trender () {\n\t\tconst {\n\t\t\tloginFormloginName,\n\t\t\terror,\n\t\t\tloginFormloginPassword,\n\t\t\tregisterFormloginName,\n\t\t\tregisterFormloginPassword\n\t\t} = this.state\n\t\tconst $myAccount = 'My Account'\n\t\tconst $eigherLogin =\n\t\t\t'Either login or register an account with SoundsVinyl from this page'\n\n\t\tconst errorFunc = error\n\t\t\t? () => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<p styleName='error'>\n\t\t\t\t\t\t\t{error}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t: () => {\n\t\t\t\t\treturn null\n\t\t\t\t}\n\n\t\treturn (\n\t\t\t<main styleName='myAccount'>\n\t\t\t\t<h2>\n\t\t\t\t\t{$myAccount}\n\t\t\t\t</h2>\n\t\t\t\t<p>\n\t\t\t\t\t{$eigherLogin}\n\t\t\t\t</p>\n\n\t\t\t\t{errorFunc()}\n\n\t\t\t\t<section>\n\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t<MyAccountForm\n\t\t\t\t\t\t\tformName='loginForm'\n\t\t\t\t\t\t\tlegend='Login'\n\t\t\t\t\t\t\tname={loginFormloginName}\n\t\t\t\t\t\t\tnameLabel='Your email'\n\t\t\t\t\t\t\tonFormSubmit={this.handleSubmitLogin}\n\t\t\t\t\t\t\tonInputChange={this.handleInputChange}\n\t\t\t\t\t\t\tpassword={loginFormloginPassword}\n\t\t\t\t\t\t\tpasswordLabel='Your password'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ErrorBoundary>\n\n\t\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t\t<MyAccountForm\n\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\tformName='registerForm'\n\t\t\t\t\t\t\tlegend='Register'\n\t\t\t\t\t\t\tname={registerFormloginName}\n\t\t\t\t\t\t\tnameLabel='Your email'\n\t\t\t\t\t\t\tonFormSubmit={this.handleSubmitRegister}\n\t\t\t\t\t\t\tonInputChange={this.handleInputChange}\n\t\t\t\t\t\t\tpassword={registerFormloginPassword}\n\t\t\t\t\t\t\tpasswordLabel='Your password'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t</section>\n\t\t\t</main>\n\t\t)\n\t}\n}\n\nexport default MyAccount\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"line-through\":\"account__line-through___3n019\",\"myAccount\":\"account__myAccount___35jgU\",\"error\":\"account__error___3LR2J\"};","import { Component } from 'react'\nimport React from 'react'\nimport PropTypes from 'prop-types'\n\nexport default class MyAccountForm extends Component {\n\tstatic propTypes = {\n\t\tdisabled: PropTypes.bool,\n\t\tformName: PropTypes.string.isRequired,\n\t\tlegend: PropTypes.string.isRequired,\n\t\tname: PropTypes.string.isRequired,\n\t\tnameLabel: PropTypes.string.isRequired,\n\t\tonFormSubmit: PropTypes.func.isRequired,\n\t\tonInputChange: PropTypes.func.isRequired,\n\t\tpassword: PropTypes.string.isRequired,\n\t\tpasswordLabel: PropTypes.string.isRequired\n\t}\n\n\tstatic defaultProps = {\n\t\tdisabled: false\n\t}\n\n\tconstructor (props) {\n\t\tsuper(props)\n\n\t\tthis.handleSubmitLogin = this.handleSubmitLogin.bind(this)\n\t\tthis.handleInputChange = this.handleInputChange.bind(this)\n\t}\n\n\thandleSubmitLogin (event) {\n\t\tevent.preventDefault()\n\n\t\tconst { onFormSubmit } = this.props\n\t\tonFormSubmit()\n\t}\n\n\thandleInputChange (event) {\n\t\tevent.preventDefault()\n\n\t\tconst { onInputChange } = this.props\n\t\tonInputChange(event)\n\t}\n\n\trender () {\n\t\tconst {\n\t\t\tname,\n\t\t\tpassword,\n\t\t\tlegend,\n\t\t\tnameLabel,\n\t\t\tpasswordLabel,\n\t\t\tformName,\n\t\t\tdisabled\n\t\t} = this.props\n\n\t\treturn (\n\t\t\t<form\n\t\t\t\tautoComplete='off'\n\t\t\t\tname={formName}\n\t\t\t\tonSubmit={this.handleSubmitLogin}\n\t\t\t>\n\t\t\t\t<fieldset>\n\t\t\t\t\t<legend>\n\t\t\t\t\t\t{legend}\n\t\t\t\t\t</legend>\n\n\t\t\t\t\t<label htmlFor={`${formName}loginName`}>\n\t\t\t\t\t\t{nameLabel}\n\t\t\t\t\t</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tdata-autocapitalize='none'\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\tid={`${formName}loginName`}\n\t\t\t\t\t\tname={`${formName}loginName`}\n\t\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t\t\trequired\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<label htmlFor={`${formName}loginPassword`}>\n\t\t\t\t\t\t{passwordLabel}\n\t\t\t\t\t</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\tid={`${formName}loginPassword`}\n\t\t\t\t\t\tname={`${formName}loginPassword`}\n\t\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t\t\trequired\n\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\tvalue={password}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<input\n\t\t\t\t\t\tname='loginSubmit'\n\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\tvalue='Login'\n\t\t\t\t\t/>\n\t\t\t\t</fieldset>\n\t\t\t</form>\n\t\t)\n\t}\n}\n"],"sourceRoot":""}