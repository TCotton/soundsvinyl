/*! For license information please see 9.379d321a2c16fb9d2ca2.chunk.js.LICENSE */
(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{105:function(e,t,n){"use strict";t.parse=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var n={},o=t||{},a=e.split(i),s=o.decode||r,l=0;l<a.length;l++){var c=a[l],d=c.indexOf("=");if(!(d<0)){var f=c.substr(0,d).trim(),p=c.substr(++d,c.length).trim();'"'==p[0]&&(p=p.slice(1,-1)),null==n[f]&&(n[f]=u(p,s))}}return n},t.serialize=function(e,t,n){var r=n||{},i=r.encode||o;if("function"!=typeof i)throw new TypeError("option encode is invalid");if(!a.test(e))throw new TypeError("argument name is invalid");var u=i(t);if(u&&!a.test(u))throw new TypeError("argument val is invalid");var s=e+"="+u;if(null!=r.maxAge){var l=r.maxAge-0;if(isNaN(l))throw new Error("maxAge should be a Number");s+="; Max-Age="+Math.floor(l)}if(r.domain){if(!a.test(r.domain))throw new TypeError("option domain is invalid");s+="; Domain="+r.domain}if(r.path){if(!a.test(r.path))throw new TypeError("option path is invalid");s+="; Path="+r.path}if(r.expires){if("function"!=typeof r.expires.toUTCString)throw new TypeError("option expires is invalid");s+="; Expires="+r.expires.toUTCString()}r.httpOnly&&(s+="; HttpOnly");r.secure&&(s+="; Secure");if(r.sameSite){switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return s};var r=decodeURIComponent,o=encodeURIComponent,i=/; */,a=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function u(e,t){try{return t(e)}catch(t){return e}}},16:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.homeURI=window.location.protocol+"//"+window.location.hostname+(0===window.location.port.length?"":":8443")},221:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(10),i=p(o),a=p(n(19)),u=p(n(352)),s=p(n(3)),l=n(16),c=n(2);n(222);var d=p(n(223)),f=p(n(20));function p(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loginFormloginName:"",loginFormloginPassword:"",registerFormloginName:"",registerFormloginPassword:"",error:null},n.handleSubmitLogin=n.handleSubmitLogin.bind(n),n.handleSubmitRegister=n.handleSubmitRegister.bind(n),n.handleInputChange=n.handleInputChange.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"handleSubmitRegister",value:function(e){var t=this;e.preventDefault();var n=this.state,r=n.registerFormloginName,o=n.registerFormloginPassword;if(r&&o){var i=r,d=o;this.setState({error:null});var f=(0,c.createUsername)(i);a.default.post(l.homeURI+"/apiV1/user/add",{email:i,password:d,username:f}).then((function(e){(e.data.error&&t.setState({error:e.data.error}),e.data.auth)&&((new u.default).set("token",e.data.token,{expires:(0,s.default)().add(1,"days").toDate(),path:"/",domain:window.location.hostname,secure:!0}),window.location.href=document.referrer)})).catch((function(e){e.toString().includes("409")&&t.setState({error:"This email address is already registered"})}))}}},{key:"handleSubmitLogin",value:function(){var e=this,t=this.state,n=t.loginFormloginName,r=t.loginFormloginPassword;n&&r&&(this.setState({error:null}),a.default.post(l.homeURI+"/apiV1/user/find",{email:n,password:r}).then((function(t){(t.data.error&&e.setState({error:t.data.error}),t.data.auth)&&((new u.default).set("token",t.data.token,{expires:(0,s.default)().add(1,"days").toDate(),path:"/",domain:window.location.hostname,secure:!0}),window.location.href=document.referrer)})))}},{key:"handleInputChange",value:function(e){var t=e.target,n=t.value,r=t.name;this.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},r,n))}},{key:"render",value:function(){var e=this.state,t=e.loginFormloginName,n=e.error,r=e.loginFormloginPassword,o=e.registerFormloginName,a=e.registerFormloginPassword,u=n?function(){return i.default.createElement("p",{className:"account__error___3LR2J"},n)}:function(){return null};return i.default.createElement("main",{className:"account__myAccount___35jgU"},i.default.createElement("h2",null,"My Account"),i.default.createElement("p",null,"Either login or register an account with SoundsVinyl from this page"),u(),i.default.createElement("section",null,i.default.createElement(f.default,null,i.default.createElement(d.default,{formName:"loginForm",legend:"Login",name:t,nameLabel:"Your email",onFormSubmit:this.handleSubmitLogin,onInputChange:this.handleInputChange,password:r,passwordLabel:"Your password"})),i.default.createElement(f.default,null,i.default.createElement(d.default,{disabled:!0,formName:"registerForm",legend:"Register",name:o,nameLabel:"Your email",onFormSubmit:this.handleSubmitRegister,onInputChange:this.handleInputChange,password:a,passwordLabel:"Your password"}))))}}]),t}(o.Component);t.default=h},222:function(e,t,n){e.exports={"line-through":"account__line-through___3n019",myAccount:"account__myAccount___35jgU",error:"account__error___3LR2J"}},223:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(10),i=u(o),a=u(n(11));function u(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSubmitLogin=n.handleSubmitLogin.bind(n),n.handleInputChange=n.handleInputChange.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"handleSubmitLogin",value:function(e){e.preventDefault(),(0,this.props.onFormSubmit)()}},{key:"handleInputChange",value:function(e){e.preventDefault(),(0,this.props.onInputChange)(e)}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.password,r=e.legend,o=e.nameLabel,a=e.passwordLabel,u=e.formName,s=e.disabled;return i.default.createElement("form",{autoComplete:"off",name:u,onSubmit:this.handleSubmitLogin},i.default.createElement("fieldset",null,i.default.createElement("legend",null,r),i.default.createElement("label",{htmlFor:u+"loginName"},o),i.default.createElement("input",{"data-autocapitalize":"none",disabled:s,id:u+"loginName",name:u+"loginName",onChange:this.handleInputChange,required:!0,type:"text",value:t}),i.default.createElement("label",{htmlFor:u+"loginPassword"},a),i.default.createElement("input",{disabled:s,id:u+"loginPassword",name:u+"loginPassword",onChange:this.handleInputChange,required:!0,type:"password",value:n}),i.default.createElement("input",{name:"loginSubmit",type:"submit",value:"Login"})))}}]),t}(o.Component);s.propTypes={disabled:a.default.bool,formName:a.default.string.isRequired,legend:a.default.string.isRequired,name:a.default.string.isRequired,nameLabel:a.default.string.isRequired,onFormSubmit:a.default.func.isRequired,onInputChange:a.default.func.isRequired,password:a.default.string.isRequired,passwordLabel:a.default.string.isRequired},s.defaultProps={disabled:!1},t.default=s},352:function(e,t,n){"use strict";n.r(t);var r=n(105);function o(){return!function(){if("object"!=typeof navigator||"string"!=typeof navigator.userAgent)return!1;return navigator.userAgent.indexOf("Node.js")>=0||navigator.userAgent.indexOf("jsdom")>=0}()&&("object"==typeof document&&"string"==typeof document.cookie)}function i(e,t){void 0===t&&(t={});var n=function(e){if(e&&"j"===e[0]&&":"===e[1])return e.substr(2);return e}(e);if(function(e,t){return void 0===t&&(t=!e||"{"!==e[0]&&"["!==e[0]&&'"'!==e[0]),!t}(n,t.doNotParse))try{return JSON.parse(n)}catch(e){}return e}var a=n(25),u=function(){function e(e){var t=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=function(e){return"string"==typeof e?r.parse(e):"object"==typeof e&&null!==e?e:{}}(e),new Promise((function(){t.HAS_DOCUMENT_COOKIE=o()})).catch((function(){}))}return e.prototype._updateBrowserValues=function(){this.HAS_DOCUMENT_COOKIE&&(this.cookies=r.parse(document.cookie))},e.prototype._emitChange=function(e){for(var t=0;t<this.changeListeners.length;++t)this.changeListeners[t](e)},e.prototype.get=function(e,t){return void 0===t&&(t={}),this._updateBrowserValues(),i(this.cookies[e],t)},e.prototype.getAll=function(e){void 0===e&&(e={}),this._updateBrowserValues();var t={};for(var n in this.cookies)t[n]=i(this.cookies[n],e);return t},e.prototype.set=function(e,t,n){var o;"object"==typeof t&&(t=JSON.stringify(t)),this.cookies=a({},this.cookies,((o={})[e]=t,o)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=r.serialize(e,t,n)),this._emitChange({name:e,value:t,options:n})},e.prototype.remove=function(e,t){var n=t=a({},t,{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=a({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=r.serialize(e,"",n)),this._emitChange({name:e,value:void 0,options:t})},e.prototype.addChangeListener=function(e){this.changeListeners.push(e)},e.prototype.removeChangeListener=function(e){var t=this.changeListeners.indexOf(e);t>=0&&this.changeListeners.splice(t,1)},e}();t.default=u}}]);